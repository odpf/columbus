"use strict";(self.webpackChunkcompass=self.webpackChunkcompass||[]).push([[464],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return m}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var o=a.createContext({}),u=function(e){var t=a.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},p=function(e){var t=u(e.components);return a.createElement(o.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,l=e.originalType,o=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),c=u(n),m=r,g=c["".concat(o,".").concat(m)]||c[m]||d[m]||l;return n?a.createElement(g,s(s({ref:t},p),{},{components:n})):a.createElement(g,s({ref:t},p))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=n.length,s=new Array(l);s[0]=c;var i={};for(var o in t)hasOwnProperty.call(t,o)&&(i[o]=t[o]);i.originalType=e,i.mdxType="string"==typeof e?e:r,s[1]=i;for(var u=2;u<l;u++)s[u]=n[u];return a.createElement.apply(null,s)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},5162:function(e,t,n){n.d(t,{Z:function(){return s}});var a=n(7294),r=n(6010),l="tabItem_Ymn6";function s(e){var t=e.children,n=e.hidden,s=e.className;return a.createElement("div",{role:"tabpanel",className:(0,r.Z)(l,s),hidden:n},t)}},5488:function(e,t,n){n.d(t,{Z:function(){return m}});var a=n(7462),r=n(7294),l=n(6010),s=n(2389),i=n(7392),o=n(7094),u=n(2466),p="tabList__CuJ",d="tabItem_LNqP";function c(e){var t,n,s=e.lazy,c=e.block,m=e.defaultValue,g=e.values,f=e.groupId,b=e.className,k=r.Children.map(e.children,(function(e){if((0,r.isValidElement)(e)&&"value"in e.props)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})),h=null!=g?g:k.map((function(e){var t=e.props;return{value:t.value,label:t.label,attributes:t.attributes}})),v=(0,i.l)(h,(function(e,t){return e.value===t.value}));if(v.length>0)throw new Error('Docusaurus error: Duplicate values "'+v.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.');var y=null===m?m:null!=(t=null!=m?m:null==(n=k.find((function(e){return e.props.default})))?void 0:n.props.value)?t:k[0].props.value;if(null!==y&&!h.some((function(e){return e.value===y})))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+y+'" but none of its children has the corresponding value. Available values are: '+h.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");var N=(0,o.U)(),w=N.tabGroupChoices,T=N.setTabGroupChoices,C=(0,r.useState)(y),O=C[0],j=C[1],x=[],A=(0,u.o5)().blockElementScrollPositionUntilNextRender;if(null!=f){var P=w[f];null!=P&&P!==O&&h.some((function(e){return e.value===P}))&&j(P)}var E=function(e){var t=e.currentTarget,n=x.indexOf(t),a=h[n].value;a!==O&&(A(t),j(a),null!=f&&T(f,String(a)))},I=function(e){var t,n=null;switch(e.key){case"ArrowRight":var a,r=x.indexOf(e.currentTarget)+1;n=null!=(a=x[r])?a:x[0];break;case"ArrowLeft":var l,s=x.indexOf(e.currentTarget)-1;n=null!=(l=x[s])?l:x[x.length-1]}null==(t=n)||t.focus()};return r.createElement("div",{className:(0,l.Z)("tabs-container",p)},r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,l.Z)("tabs",{"tabs--block":c},b)},h.map((function(e){var t=e.value,n=e.label,s=e.attributes;return r.createElement("li",(0,a.Z)({role:"tab",tabIndex:O===t?0:-1,"aria-selected":O===t,key:t,ref:function(e){return x.push(e)},onKeyDown:I,onFocus:E,onClick:E},s,{className:(0,l.Z)("tabs__item",d,null==s?void 0:s.className,{"tabs__item--active":O===t})}),null!=n?n:t)}))),s?(0,r.cloneElement)(k.filter((function(e){return e.props.value===O}))[0],{className:"margin-top--md"}):r.createElement("div",{className:"margin-top--md"},k.map((function(e,t){return(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==O})}))))}function m(e){var t=(0,s.Z)();return r.createElement(c,(0,a.Z)({key:String(t)},e))}},1487:function(e,t,n){n.r(t),n.d(t,{assets:function(){return c},contentTitle:function(){return p},default:function(){return f},frontMatter:function(){return u},metadata:function(){return d},toc:function(){return m}});var a=n(7462),r=n(3366),l=(n(7294),n(3905)),s=n(5488),i=n(5162),o=["components"],u={},p="Asset",d={unversionedId:"concepts/asset",id:"concepts/asset",title:"Asset",description:"In Compass, we call every metadata that you input as an Asset. All your tables, dashboards, topics, jobs are an example of assets.",source:"@site/docs/concepts/asset.mdx",sourceDirName:"concepts",slug:"/concepts/asset",permalink:"/compass/concepts/asset",draft:!1,editUrl:"https://github.com/raystack/compass/edit/master/docs/docs/concepts/asset.mdx",tags:[],version:"current",frontMatter:{},sidebar:"docsSidebar",previous:{title:"Overview",permalink:"/compass/concepts/overview"},next:{title:"Type",permalink:"/compass/concepts/type"}},c={},m=[{value:"Lineage",id:"lineage",level:2},{value:"Asset Versioning",id:"asset-versioning",level:2},{value:"Tagging an Asset",id:"tagging-an-asset",level:2}],g={toc:m};function f(e){var t=e.components,n=(0,r.Z)(e,o);return(0,l.kt)("wrapper",(0,a.Z)({},g,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"asset"},"Asset"),(0,l.kt)("p",null,"In Compass, we call every metadata that you input as an Asset. All your tables, dashboards, topics, jobs are an example of assets."),(0,l.kt)(s.Z,{mdxType:"Tabs"},(0,l.kt)(i.Z,{value:"table",label:"Table View",mdxType:"TabItem"},(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Field"),(0,l.kt)("th",{parentName:"tr",align:null},"Required"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"id"),(0,l.kt)("td",{parentName:"tr",align:null},"false"),(0,l.kt)("td",{parentName:"tr",align:null},"string"),(0,l.kt)("td",{parentName:"tr",align:null},"compass' auto-generated uuid")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"urn"),(0,l.kt)("td",{parentName:"tr",align:null},"true"),(0,l.kt)("td",{parentName:"tr",align:null},"string"),(0,l.kt)("td",{parentName:"tr",align:null},"external identifier of the metadata")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"type"),(0,l.kt)("td",{parentName:"tr",align:null},"true"),(0,l.kt)("td",{parentName:"tr",align:null},"string"),(0,l.kt)("td",{parentName:"tr",align:null},"type of metadata, only supports ",(0,l.kt)("inlineCode",{parentName:"td"},"table"),", ",(0,l.kt)("inlineCode",{parentName:"td"},"job"),", ",(0,l.kt)("inlineCode",{parentName:"td"},"topic"),",",(0,l.kt)("inlineCode",{parentName:"td"},"dashboard"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"service"),(0,l.kt)("td",{parentName:"tr",align:null},"true"),(0,l.kt)("td",{parentName:"tr",align:null},"string"),(0,l.kt)("td",{parentName:"tr",align:null},"application name where the metadata was coming from e.g. ",(0,l.kt)("inlineCode",{parentName:"td"},"bigquery"),", ",(0,l.kt)("inlineCode",{parentName:"td"},"postgres"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"name"),(0,l.kt)("td",{parentName:"tr",align:null},"true"),(0,l.kt)("td",{parentName:"tr",align:null},"string"),(0,l.kt)("td",{parentName:"tr",align:null},"name of the metadata")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"description"),(0,l.kt)("td",{parentName:"tr",align:null},"false"),(0,l.kt)("td",{parentName:"tr",align:null},"string"),(0,l.kt)("td",{parentName:"tr",align:null},"description of the metadata")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"data"),(0,l.kt)("td",{parentName:"tr",align:null},"false"),(0,l.kt)("td",{parentName:"tr",align:null},"json"),(0,l.kt)("td",{parentName:"tr",align:null},"dynamic data")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"labels"),(0,l.kt)("td",{parentName:"tr",align:null},"false"),(0,l.kt)("td",{parentName:"tr",align:null},"json"),(0,l.kt)("td",{parentName:"tr",align:null},"labels of metadata, written in key-value string")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"owners"),(0,l.kt)("td",{parentName:"tr",align:null},"false"),(0,l.kt)("td",{parentName:"tr",align:null},"[]json"),(0,l.kt)("td",{parentName:"tr",align:null},"array of json, where each json contains ",(0,l.kt)("inlineCode",{parentName:"td"},"email")," field"))))),(0,l.kt)(i.Z,{value:"json",label:"JSON",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n\n    "urn": "topic/order-log",\n    "type": "topic",\n    "service": "kafka",\n    "description": "desc",\n    "data": {\n        "some_data1": {\n            "random_data": 123,\n            "nested_data": {\n                "boolean_data": true\n            }\n        },\n        "some_data1": "value"\n    }\n    "labels": {\n        "labelkey1": "labelvalue1",\n        "labelkey2": "labelvalue2"\n    },\n    "users": [\n        {\n            "email": "user@raystack.io"\n        }\n    ]\n}\n')))),(0,l.kt)("p",null,"Every asset that is pushed SHOULD have the required fields: ",(0,l.kt)("inlineCode",{parentName:"p"},"urn"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"type"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"service"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"name"),". The value of these fields MUST be string, if present."),(0,l.kt)("p",null,"Asset ingestion API (",(0,l.kt)("inlineCode",{parentName:"p"},"/v1beta1/assets"),") is using HTTP PATCH method. The behavioud would be similar with how PATCH works. It is possible to patch one field only in an asset by sending the updated field to the ingestion API. This also works for the data in dynamic ",(0,l.kt)("inlineCode",{parentName:"p"},"data")," field. The combination of ",(0,l.kt)("inlineCode",{parentName:"p"},"urn"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"type"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"service")," will be the identifier to patch an asset.\nIn case the ",(0,l.kt)("inlineCode",{parentName:"p"},"urn")," does not exist, the asset ingestion PATCH API ","(","/v1beta1/assets",")"," will create a new asset."),(0,l.kt)("h2",{id:"lineage"},"Lineage"),(0,l.kt)("p",null,"Lineage is the origin or history of an asset. It represents a series of transformation of one or many assets."),(0,l.kt)("p",null,"Each asset can have downstream/s and upstream/s. An asset without a single downstream, tells us that it is the end of the lineage, while an asset without a single upstream means that it is a start of a lineage."),(0,l.kt)("p",null,"This is how a lineage is currently being represented"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},'[\n    {\n        "source": {\n            "urn": "topic/order-log",\n            "type": "topic",\n            "service": "kafka"\n        },\n        "target": {\n            "urn": "bqtable/order_monthly",\n            "type": "table",\n            "service": "bigquery"\n        },\n        "props": nil\n    },\n    {\n        "source": {\n            "urn": "topic/order-log",\n            "type": "topic",\n            "service": "kafka"\n        },\n        "target": {\n            "urn": "bqtable/order_daily",\n            "type": "table",\n            "service": "bigquery"\n        },\n        "props": nil\n    },\n]\n')),(0,l.kt)("h2",{id:"asset-versioning"},"Asset Versioning"),(0,l.kt)("p",null,"Compass versions each updated asset ingested via Upsert Patch API. The base version of an asset is ",(0,l.kt)("inlineCode",{parentName:"p"},"v0.1"),". The base version will be given to the newly created asset. If there is any changes in the asset schema, a new version will be created.\nUp until now, Compass always bump up the minor version if an asset get updated. The version history of an asset could also be fetched via ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/raystack/compass/blob/main/third_party/OpenAPI/compass.swagger.json"},"/v1beta1/assets/{id}/versions")," API.\nNot only storing the versions of an asset, Compass also stores the changelog between each version. Compass use ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/r3labs/diff"},"r3labs/diff")," to get the diff between newly ingested asset and the existing asset."),(0,l.kt)("p",null,"For instance, there is an asset with urn ",(0,l.kt)("inlineCode",{parentName:"p"},"kafka:booking-log-kafka")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},'{\n    "id": "f2bb4e02-12b6-4c9f-aa9d-7d56aaaeb51e",\n    "urn": "kafka:booking-log-kafka",\n    "type": "topic",\n    "service": "kafka",\n    "data": {},\n    "labels": {\n        "environment": "integration"\n    },\n    "version": "0.1"\n}\n')),(0,l.kt)("p",null,"If there is an update to the ",(0,l.kt)("inlineCode",{parentName:"p"},"environment")," in the asset labels, here is the asset version history stored in Compass:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},'{\n    "id": "f2bb4e02-12b6-4c9f-aa9d-7d56aaaeb51e",\n    "urn": "kafka:booking-log-kafka",\n    "type": "topic",\n    "service": "kafka",\n    "data": {},\n    "labels": {\n        "environment": "production"\n    },\n    "version": "0.2"\n    "changelog": [\n        {\n            "type": "update",\n            "path": ["labels","environment"],\n            "from": "integration",\n            "to":   "production\n        }\n    ]\n}\n')),(0,l.kt)("h2",{id:"tagging-an-asset"},"Tagging an Asset"),(0,l.kt)("p",null,"Compass allows user to tag a specific asset. To tag a new asset, one needs to create a template of the tag. Tag's template defines a set of fields' tag that are applicable to tag each field in an asset.\nOnce a template is created, each field in an asset is possible to be tagged by calling ",(0,l.kt)("inlineCode",{parentName:"p"},"/v1beta1/tags")," API. More detail about ",(0,l.kt)("a",{parentName:"p",href:"/compass/guides/tagging"},"Tagging"),"."))}f.isMDXComponent=!0}}]);